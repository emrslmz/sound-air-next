<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <link rel="icon" href="/favicon.ico" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta property="CROSS_APP_URL" content="<%= CROSS_APP_URL %>" />
    <title>
        Sound AIR
    </title>
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script src="https://www.googletagmanager.com/gtag/js?id=UA-62674891-17" type="module"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'UA-62674891-17');
    </script>

</head>
<body>
<div id="app"></div>
<div class='handy-notify'>
    <span></span>
</div>
<script type="module" src='/src/main.ts'></script>
</body>
<script type="text/javascript">
    const shouldBeCookieUsed = navigator.userAgent.indexOf("Chrome") === -1 || navigator.userAgent.match('CriOS');

    if (shouldBeCookieUsed) {
        // sets token to localStorage from cookie
        (() => {
            const APP_TOKEN_NAME = 'access_token';

            const getCookie = (name) => {
                // Split cookie string and get all individual name=value pairs in an array
                const cookieArr = document.cookie.split(';');

                // Loop through the array elements
                for(let i = 0; i < cookieArr.length; i++) {
                    const cookiePair = cookieArr[i].split('=');

                    /* Removing whitespace at the beginning of the cookie name
                    and compare it with the given string */
                    if(name === cookiePair[0].trim()) {
                        // Decode the cookie value and return
                        return decodeURIComponent(cookiePair[1]);
                    }
                }

                // Return null if not found
                return null;
            }

            if (getCookie(APP_TOKEN_NAME)) {
                localStorage.setItem(APP_TOKEN_NAME, getCookie(APP_TOKEN_NAME));
            } else {
                localStorage.removeItem(APP_TOKEN_NAME);
            }
        })();
    }
</script>
</html>
